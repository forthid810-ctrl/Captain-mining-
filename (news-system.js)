// News Management System
let isAdmin = false;

function toggleAdmin() {
    isAdmin = !isAdmin;
    document.body.classList.toggle('admin-mode', isAdmin);
    alert(isAdmin ? 'Admin Mode ON' : 'Admin Mode OFF');
}

function addNews() {
    if (!isAdmin) {
        alert('Admin access required!');
        return;
    }

    const title = document.getElementById('newsTitle').value;
    const content = document.getElementById('newsContent').value;
    
    if (!title || !content) {
        alert('Please fill all fields');
        return;
    }

    const newsItem = {
        id: Date.now(),
        title: title,
        content: content,
        date: new Date().toLocaleString(),
        author: 'Admin'
    };

    // Save to localStorage
    saveNews(newsItem);
    
    // Clear form
    document.getElementById('newsTitle').value = '';
    document.getElementById('newsContent').value = '';
    
    // Refresh display
    displayNews();
}

function saveNews(newsItem) {
    let news = JSON.parse(localStorage.getItem('miningNews')) || [];
    news.unshift(newsItem); // Add to beginning
    localStorage.setItem('miningNews', JSON.stringify(news));
}

function displayNews() {
    const newsContainer = document.getElementById('newsContainer');
    const news = JSON.parse(localStorage.getItem('miningNews')) || [];
    
    if (news.length === 0) {
        newsContainer.innerHTML = '<p>No news available yet.</p>';
        return;
    }

    newsContainer.innerHTML = news.map(item => `
        <div class="news-item">
            <h3>${item.title}</h3>
            <p>${item.content}</p>
            <small><strong>Date:</strong> ${item.date} | <strong>By:</strong> ${item.author}</small>
            ${isAdmin ? `<button onclick="deleteNews(${item.id})" style="color: red; float: right;">Delete</button>` : ''}
        </div>
    `).join('');
}

function deleteNews(id) {
    if (!isAdmin) return;
    
    let news = JSON.parse(localStorage.getItem('miningNews')) || [];
    news = news.filter(item => item.id !== id);
    localStorage.setItem('miningNews', JSON.stringify(news));
    displayNews();
}

// Initial load
displayNews();
